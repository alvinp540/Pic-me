{% extends 'base.html' %}

{% block title %}Set New Password - PicMe{% endblock %}

{% block content %}
<div style="max-width: 400px; margin: 3rem auto;">
    {% if validlink %}
        <div class="hero mb-4">
            <h1>Set New Password</h1>
            <p>Create a strong password</p>
        </div>

        <div class="card">
            <form method="post">
                {% csrf_token %}
                
                <div class="form-group">
                    <label for="id_new_password1">New Password</label>
                    <input type="password" name="new_password1" id="id_new_password1" required>
                    {% if form.new_password1.errors %}<p style="color: var(--danger-color);">{{ form.new_password1.errors.0 }}</p>{% endif %}
                </div>

                <div class="form-group">
                    <label for="id_new_password2">Confirm Password</label>
                    <input type="password" name="new_password2" id="id_new_password2" required>
                    {% if form.new_password2.errors %}<p style="color: var(--danger-color);">{{ form.new_password2.errors.0 }}</p>{% endif %}
                </div>

                <button type="submit" class="btn btn-primary" style="width: 100%;">Update Password</button>
            </form>
        </div>
    {% else %}
        <div class="hero mb-4">
            <h1>Invalid Link</h1>
            <p>This reset link has expired</p>
        </div>

        <div class="alert alert-error">
            <p>Password reset links are only valid for 24 hours. You can request a new one below.</p>
        </div>

        <a href="{% url 'password_reset' %}" class="btn btn-primary" style="display: block; text-align: center;">Request New Reset Link</a>
    {% endif %}
</div>
{% endblock %}
